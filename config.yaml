# Bloviate Configuration

# Audio Settings
audio:
  sample_rate: 16000
  chunk_size: 1024
  channels: 1
  device_name: "Scarlett"  # Will auto-detect Scarlett devices

# Push-to-Talk Settings
ptt:
  hotkey: "<cmd>+<option>"
  secondary_hotkey: "<fn>"  # Optional secondary PTT hotkey

# Window Management Settings
window_management:
  enabled: true
  hotkey_prefix: "<ctrl>+<cmd>"  # Base hotkey, combine with arrow keys
  command_hotkey: "<ctrl>+<cmd>"  # Hold to speak window commands

# Voice Fingerprinting
voice_fingerprint:
  enabled: true
  mode: "whisper"  # whisper (verify) or talk (bypass verification)
  threshold: 0.65  # 0-1, higher = stricter matching
  embedding_model: "speechbrain/spkrec-ecapa-voxceleb"
  min_enrollment_samples: 5

# Noise Suppression
noise_suppression:
  enabled: true
  stationary_noise_reduction: 0.8  # 0-1
  vad_aggressiveness: 3  # 0-3, higher = more aggressive
  spectral_gate_threshold: 0.03

# Transcription
transcription:
  provider: "deepgram"  # whisper, deepgram
  model: "medium.en"  # Whisper primary: tiny.en, base.en, small.en, medium.en
  whisper_fallback_model: "base.en"  # Faster model used when Deepgram fails
  language: "en"
  output_format: "clipboard"  # clipboard, stdout, both
  auto_paste: true  # Automatically paste after copying to clipboard
  use_custom_dictionary: true  # Apply custom dictionary corrections

# Deepgram (live streaming)
deepgram:
  streaming: true
  model: "flux-general-en"  # Fastest. Try "nova-3" for higher accuracy if available.
  api_version: "v2"  # Flux requires v2; remove or set v1 for older models.
  prerecorded_model: "nova-3"  # Fallback model for non-streaming transcription.
  prerecorded_api_version: "v1"
  punctuate: true
  smart_format: false
  interim_results: true
  endpointing: 300  # ms of silence before finalizing
  eot_timeout_ms: 800  # v2 end-of-transcript timeout; uses endpointing if unset.
  no_delay: true
  api_key: "86f29b846a3ab6004b8f9142f478ddcbc5c00b13"
  api_key_env: "DEEPGRAM_API_KEY"
  finalize_wait_s: 0.6
  connect_timeout_s: 2.0
  prerecorded_timeout_s: 10
  prebuffer_chunks: 50  # ~50 * 64ms = 3.2s of pre-roll (covers async connect time)
  keyterm:
    - "bash"
    - "Claude"
  extra_query_params: {}

# UI
ui:
  show_waveform: true
  show_metrics: true
  window_size: [400, 200]
  theme: "dark"
  interim_update_interval_s: 0.15
  show_menubar_indicator: true  # Show status in macOS menu bar
  show_main_window: false  # Hide the debug/status window by default
  ptt_overlay:
    enabled: true
    margin: 20  # Distance from bottom of screen
